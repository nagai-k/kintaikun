<!DOCTYPE html>
<html manifest="kintaikun.appcache">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<script src="./js/kintai.js"></script>
<script src="./js/kintai_boss.js"></script>
<script src="./js/kintai_type.js"></script>
<script src="./js/kintai_status.js"></script>
<link rel="stylesheet"  href="./lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.css" />
<link rel="stylesheet"  href="./lib/jquery.mobile-1.3.2/jquery.mobile.structure-1.3.2.min.css" />
<script src="./lib/jquery/jquery-2.0.3.min.js"></script>
<script src="./lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.js"></script>
<script src="./lib/jquery-jquery-tmpl/jquery.tmpl.js"></script>
<link rel="apple-touch-icon" href="./icon/apple-touch-icon-144x144.png">
<title>勤怠くん</title>
</head>
<body>


<!-- Start of first page: #menu -->
<div data-role="page" id="menu">
<div data-role="header" data-theme="b">
  <a href="#page_setting" data-role="button" data-icon="gear" data-iconpos="notext" class="ui-btn-left">設定</a>
  <a href="#menu" data-role="button" class="ui-btn-right" data-theme="e" onClick="createNewMail()">新規メール</a>
  <h1>勤怠くん</h1>
</div><!-- /header -->

<div data-role="content">
<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_destination">送信先</a></li>
</ul>

<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_sender">報告者</a></li>
</ul>
 
<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_senddate">日付<span id="senddate_disp" style="color:#898989;"></span></a></li>
</ul>

<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_kintai_status_select">状況<span id="selected_kintai_status_disp" style="color:#898989;"></span></a></li>
</ul>

<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_kintai_type_select">種別<span id="selected_kintai_type_disp" style="color:#898989;"></span></a></li>
</ul>

<ul data-role="listview" data-inset="true" data-theme="d" data-divider-theme="d">
<li><a href="#page_boss_select">上長報告<span id="selected_boss_disp" style="color:#898989;"></span></a></li>
</ul>

</div><!-- /content -->
    
</div><!-- /page menu -->

<!-- Start of second page: #page_destination -->
<div data-role="page" id="page_destination" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#menu" data-role="button" data-inline="true" data-icon="back" data-direction="reverse">勤怠くん</a>
    <h1>送信先</h1>
  </div><!-- /header -->

  <div data-role="content">
    <label for="dest_email_input">宛先:</label>
    <input type="email" name="dest_email_input" id="dest_email_input" value=""  onblur="setDestEmail()" />
  </div><!-- /content -->
  
</div><!-- /page page_destination -->


<!-- Start of second page: #page_sender -->
<div data-role="page" id="page_sender" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#menu" data-role="button" data-inline="true" data-icon="back" data-direction="reverse">勤怠くん</a>
    <h1>報告者</h1>
  </div><!-- /header -->

  <div data-role="content">
    <div data-role="fieldcontain">
    <label for="sender_group_input">所属:</label>
    <input type="text" name="sender_group_input" id="sender_group_input" value="" onblur="setSender_name()" />
    <label for="sender_lastname_input">姓:</label>
    <input type="text" name="sender_lastname_input" id="sender_lastname_input" value=""  onblur="setSender_name()" />
    <label for="sender_firstname_input">名:</label>
    <input type="text" name="sender_firstname_input" id="sender_firstname_input" value=""  onblur="setSender_name()" />
    </div>
  </div><!-- /content -->
    
</div><!-- /page page_sender -->

<!-- Start of second page: #page_senddate -->
<div data-role="page" id="page_senddate" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#menu" data-role="button" data-inline="true" data-icon="back" data-direction="reverse">勤怠くん</a>
    <h1>日付</h1>
  </div><!-- /header -->

  <div data-role="content">
    <h1 style="text-align:center;"><span id="senddate_disp2"></span></h1>
    <div data-role="fieldcontain" align="center">
      <fieldset data-role="controlgroup" data-type="horizontal">
      <legend></legend>
      <label for="senddate_year_select">Year</label>
      <select name="senddate_year_select" id="senddate_year_select">
      </select>
      <label for="senddate_month_select">Month</label>
      <select name="senddate_month_select" id="senddate_month_select" onChange="setSenddate();">
      </select>
      <label for="senddate_day_select">Day</label>
      <select name="senddate_day_select" id="senddate_day_select" onChange="setSenddate();">
      </select>
      </fieldset>
    </div>
  </div><!-- /content -->
    
</div><!-- /page page_senddate -->


<!-- Start of first page: #page_kintai_status_select -->
<div data-role="page" id="page_kintai_status_select">
<div data-role="header" data-theme="b">
  <a href="#menu" data-transition="slide" data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" id="page_kintai_status_select_back_btn">勤怠くん</a>
  <a href="#page_kintai_status_select" data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" onClick="cancel_kintai_status_edit_list()" id="kintai_status_edit_cancel_btn">キャンセル</a>
  <a href="#page_kintai_status_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="start_kintai_status_edit_list()" id="kintai_status_edit_btn">編集</a>
  <a href="#page_kintai_status_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="done_kintai_status_edit()" id="kintai_status_edit_done_btn">完了</a>
  <h1>状況</h1>
</div><!-- /header -->
<div data-role="content" >
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" id="kintai_status_select_list_ul"></ul>
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" data-icon="gear" id="kintai_status_edit_list_ul"></ul>
</div><!-- /content -->
</div><!-- /page page_kintai_status_select -->

<!-- Start of third page: #popup_new_kintai_status -->
<div data-role="page" id="popup_new_kintai_status">

    <div data-role="header"  data-theme="b">
    <h1>状況の追加</h1>
    </div><!-- /header -->
    <div data-role="content" data-theme="d">    
      
      <div data-role="fieldcontain">
      <label for="kintai_status_name">名称:</label>
      <input type="text" name="kintai_status_name" id="kintai_status_name" value=""/>
      <label for="kintai_status_hastime">日付指定:</label>
      <select name="kintai_status_hastime" id="kintai_status_hastime" data-role="slider">
        <option value="no" selected>なし</option>
        <option value="yes">あり</option>
      </select> 
    </div>
      <p align="right"><a href="#" data-role="button" data-inline="true" onClick="add_kintai_status_name()">追加</a></p> 
    </div><!-- /content -->
    
</div><!-- /popup_new_kintai_status popup -->



<!-- Start of second page: #page_kintai_status_time -->
<div data-role="page" id="page_kintai_status_time" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#menu" data-role="button" data-inline="true" data-icon="back" data-direction="reverse">勤怠くん</a>
    <h1><span id="kintai_status_time_title"></span></h1>
  </div><!-- /header -->

  <div data-role="content">
    <h1 style="text-align:center;"><span id="kintai_status_time_disp"></span></h1>
    <div data-role="fieldcontain" style>
      <fieldset data-role="controlgroup" data-type="horizontal">
      <legend></legend>
      <label for="kintai_status_hour_select">Hour</label>
      <select name="kintai_status_hour_select" id="kintai_status_hour_select" onChange="set_kintai_status_time();">
      </select>
      <label for="kintai_status_minute_select">Minute</label>
      <select name="kintai_status_minute_select" id="kintai_status_minute_select" onChange="set_kintai_status_time();">
      </select>
      </fieldset>
    </div>
  </div><!-- /content -->
    
</div><!-- /page page_kintai_status_time -->

<!-- Start of first page: #page_kintai_type_select -->
<div data-role="page" id="page_kintai_type_select">
<div data-role="header" data-theme="b">
  <a href="#menu" data-transition="slide" data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" id="page_kintai_type_select_back_btn">勤怠くん</a>
  <a href="#page_kintai_type_select" data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" onClick="cancel_kintai_type_edit_list()" id="kintai_type_edit_cancel_btn">キャンセル</a>
  <a href="#page_kintai_type_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="start_kintai_type_edit_list()" id="kintai_type_edit_btn">編集</a>
  <a href="#page_kintai_type_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="done_kintai_type_edit()" id="kintai_type_edit_done_btn">完了</a>
  <h1>種別</h1>
</div><!-- /header -->
<div data-role="content" >
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" id="kintai_type_select_list_ul"></ul>
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" data-icon="gear" id="kintai_type_edit_list_ul"></ul>
</div><!-- /content -->
</div><!-- /page page_kintai_type_select -->

<!-- Start of third page: #popup_new_kintai_type -->
<div data-role="page" id="popup_new_kintai_type">

    <div data-role="header" data-theme="b">
    <h1>種別の追加</h1>
    </div><!-- /header -->
    <div data-role="content" data-theme="d">    
      <label for="kintai_type_name">名称:</label>
      <input type="text" name="kintai_type_name" id="kintai_type_name" value=""/>
      <p align="right"><a href="#" data-role="button" data-inline="true" onClick="add_kintai_type_name()">追加</a></p> 
    </div><!-- /content -->
    
</div><!-- /popup_new_kintai_type popup -->

<!-- Start of first page: #page_boss_select -->
<div data-role="page" id="page_boss_select">
<div data-role="header" data-theme="b">
  <a href="#menu" data-transition="slide" data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" id="page_boss_select_back_btn">勤怠くん</a>
  <a href="#page_boss_select"   data-direction="reverse" data-icon="back" data-role="button" class="ui-btn-left" onClick="cancel_boss_edit_list()" id="boss_edit_cancel_btn">キャンセル</a>
  <a href="#page_boss_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="start_boss_edit_list()" id="boss_edit_btn">編集</a>
  <a href="#page_boss_select" data-role="button" class="ui-btn-right" data-transition="flip" onClick="done_boss_edit()" id="boss_edit_done_btn">完了</a>
  <h1>上長報告</h1>
</div><!-- /header -->
<div data-role="content" >
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" id="boss_select_list_ul"></ul>
<ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" data-icon="gear" id="boss_edit_list_ul"></ul>
</div><!-- /content -->
</div><!-- /page page_boss_select -->

<!-- Start of third page: #popup_new_boss -->
<div data-role="page" id="popup_new_boss">
    <div data-role="header" data-theme="b">
    <h1>上長の追加</h1>
    </div><!-- /header -->
    <div data-role="content" data-theme="d">    
      <label for="boss_name">上長名:</label>
      <input type="text" name="boss_name" id="boss_name" value=""/>
      <p align="right"><a href="#" data-role="button" data-inline="true" onClick="add_boss_name()">追加</a></p> 
    </div><!-- /content -->
    
</div><!-- /popup_new_boss popup -->


<!-- Start of second page: #page_setting -->
<div data-role="page" id="page_setting" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#menu" data-direction="reverse" data-role="button" data-inline="true" data-icon="back">勤怠くん</a>
    <h1>メール設定</h1>
  </div><!-- /header -->

  <div data-role="content">
    <label for="setting_edit_group">編集:</label>
    <ul data-role="controlgroup" data-inset="true" data-theme="d" data-divider-theme="d" id="setting_edit_group">
    <li><a href="#page_mail_subject_template" data-role="button" style="text-align:left;" data-iconpos="right" data-icon="arrow-r">メール表題テンプレートを編集</a></li>
    <li><a href="#page_mail_body_template" data-role="button" style="text-align:left;" data-iconpos="right" data-icon="arrow-r">メール本文テンプレートを編集</a></li>
    </ul>
  </div><!-- /content -->
  
</div><!-- /page page_setting -->


<!-- Start of second page: #page_mail_subject_template -->
<div data-role="page" id="page_mail_subject_template" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#page_setting" data-direction="reverse" data-role="button" data-inline="true" data-icon="back">メール設定</a>
    <h1>テンプレート設定</h1>
  </div><!-- /header -->

  <div data-role="content">
    <div data-role="content">
    <label for="mail_subject_template">メール表題テンプレート:</label>
    <input type="text" name="mail_subject_template" id="mail_subject_template" value="【勤怠】${Date} ${YourName_lastName}" onChange="change_mail_subject_template()" />
    </div>
    <div data-role="content">
    <label for="mail_subject_published">プレビュー:</label>
    <div id="mail_subject_published"></div>
    </div>
    
    <div data-role="content">
    <a href="#" data-role="button" onClick="reset_mail_subject_template()">初期設定に戻す</a> 
    
    </div>
    
    <div data-role="content">
    <label for="mail_subject_published">凡例:</label>
    
    </div>
  </div><!-- /content -->
  
</div><!-- /page page_mail_subject_template -->

<!-- Start of second page: #page_mail_body_template -->
<div data-role="page" id="page_mail_body_template" data-title="勤怠くん">
  <div data-role="header" data-theme="b">
    <a href="#page_setting" data-direction="reverse" data-role="button" data-inline="true" data-icon="back">メール設定</a>
    <h1>テンプレート設定</h1>
  </div><!-- /header -->

  <div data-role="content">
    <div data-role="content">
    <label for="mail_body_template">メール本文テンプレート:</label>
    <textarea name="mail_body_template" id="mail_body_template" onChange="change_mail_body_template()">お疲れ様です、${YourName_lastName}です。

■日付
${Date}

{{if Situation_title}}■状況
${Situation_title}{{if Situation_time}}(${Situation_time}){{/if}}{{/if}}

{{if Type_name}}■種別
${Type_name}{{/if}}

■上長報告
{{if Boss_name}}${Boss_name}さん{{else}}なし{{/if}}

このメールは「勤怠くん(web)」で作成されました。</textarea>
    </div>
    <div data-role="content" style="display:none;">
    <label for="mail_body_published">プレビュー:</label>
    <div id="mail_body_published"></div>
    </div>
    
    <div data-role="content">
    <a href="#" data-role="button" onClick="reset_mail_body_template()">初期設定に戻す</a> 
    
    </div>
  </div><!-- /content -->
  
</div><!-- /page page_mail_body_template -->

<script>

//$("div[data-role='page']").live('pagebeforecreate',function(event){});
//$("#page_kintai_status_select").live('pagebeforecreate',function(event){});
//$("#page_kintai_type_select").live('pagebeforecreate',function(event){});
$(document).on('pagebeforecreate',function(event){
    init();
    
});
//$(function(){});
</script>

</body>
</html>